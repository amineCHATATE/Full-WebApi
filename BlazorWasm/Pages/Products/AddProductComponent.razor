@page "/Produit/add-product"
@using BlazorWasm.Models
@using BlazorWasm.Services
@inject IProductService _productService

<PageTitle>Add Product</PageTitle>

<h1>Datail Produit</h1>

<EditForm Model="newProduct" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="name" class="form-label">Name</label>
        <InputText id="name" class="form-control" @bind-Value="newProduct.Name" />
    </div>
    <div class="mb-3">
        <label for="quantity" class="form-label">Quantity</label>
        <InputNumber id="quantity" class="form-control" @bind-Value="newProduct.Quantity" />
    </div>
    <button type="submit" class="btn btn-primary">Save Product</button>
</EditForm>
    
@code {

    private Product newProduct = new();

    protected async Task HandleValidSubmit()
    {
        await _productService.CreateProduct(newProduct);
        newProduct = new Product();
    }

}
